<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Grounding Systems</title>
    <!-- Responsive meta tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css" />

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js" integrity="sha512-kZvDMZm6X3v3K9tnGpvQyQdDBgEmsnET9PT/DQ4L1ymY5MmZzFnR9t9/XzdOB+6Y0pmQEeKwK77OXbP6zU+4dQ==" crossorigin=""></script>
</head>

<body>
    <!-- Header -->
    <header>
        <span>Grounding Systems in Europe</span> |
        <a href="help.html">Help</a> |
        <a href="about.html">About</a>
    </header>

    <!-- Leaflet map -->
    <div id="map">

        <!-- Leaflet map setup script -->
        <script>
        // Load and add a single GEOJSON-file
        function loadGeoJSON(filePath) {
            fetch(filePath)
                .then(response => response.json())
                .then(data => {

                    var geojsonLayer = L.geoJSON(data, {
                        style: function (feature) {
                            return {
                                color: 'blue',
                                weight: 2,
                                opacity: 0.3
                            };
                        }
                    });

                    // add to map
                    geojsonLayer.addTo(map);
                })
                .catch(error => {
                    console.error('Error loading GEOJSON file:', error);
                });
        }

            // Funktion zum Laden aller GEOJSON-Dateien aus dem angegebenen Ordner
            function loadAllGeoJSONFiles(folderPath) {
                // URL Ihrer API, die eine Liste der GEOJSON-Dateien im Ordner zurÃ¼ckgibt
                const apiUrl = `${folderPath}/geojson.php`; // Passen Sie die URL an

                // Laden der Dateiliste von der API
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(fileList => {
                        // Laden jeder GEOJSON-Datei in der Liste
                        fileList.forEach(fileName => {
                            const filePath = `${folderPath}/${fileName}`;
                            loadGeoJSON(filePath);
                        });
                    })
                    .catch(error => {
                        console.error('Error loading file list:', error);
                    });
            }

            var map = L.map('map').setView([52.12, 9.35], 11); // Position and zoom for Hameln-Pyrmont

            // Add OpenStreetMap as base-map
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

        loadAllGeoJSONFiles('geojson');
        </script>
    </div>

    <!-- Footer -->
    <footer>
       Version 1.0.0 | <a href="https://github.com/prsmr/GroundingSystems" target="_blank">Sourcecode on GitHub</a> 
    </footer>


</body>

</html>
